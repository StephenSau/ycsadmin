<div class="modal-wrapper changeUserPsw">
  <form class="form-horizontal" name="chgUserPswForm" novalidate>

    <div class="modal-header">
      <h3 class="modal-title">修改用户账户密码</h3>
    </div>

    <div class="modal-body modal-form">
      <div class="form-group">
        <label class="col-sm-3 control-label">用户名</label>
        <div class="col-sm-8">
          <input name="username" ng-value="cred.username" class="form-control" disabled>
        </div>
      </div>
      <div class="form-group has-feedback" ng-model-options="{ debounce: 500 }" ng-class="{'has-error': chgUserPswForm.newpassword.$invalid && !chgUserPswForm.newpassword.$pristine }">
        <label class="col-sm-3 control-label">新密码</label>
        <div class="col-sm-8">
          <input type="password" class="form-control" 
            name="newpassword"
            ng-model="cred.newpassword" 
            ng-pattern="/^\S{6,20}$/" 
            placeholder="新密码" 
            required 
            tooltip="6-20位字符，不能包含空格" 
            tooltip-trigger="focus">
          <i class="fa fa-exclamation-triangle form-control-feedback"></i>
        </div>
      </div>

      <div class="form-group has-feedback" ng-model-options="{ debounce: 500 }" ng-class="{'has-error': (chgUserPswForm.confirmpassword.$invalid || cred.newpassword !== cred.confirmpassword) && !chgUserPswForm.confirmpassword.$pristine }">
        <label class="col-sm-3 control-label">确认新密码</label>
        <div class="col-sm-8">
          <input type="password" class="form-control"
            ng-model="cred.confirmpassword" 
            name="confirmpassword" 
            placeholder="确认新密码" 
            required 
            tooltip="请再输入一次密码" 
            tooltip-trigger="focus">
          <i class="fa fa-exclamation-triangle form-control-feedback"></i>
        </div>
      </div>

      <div class="form-group">
        <label class="col-sm-3 control-label">账户手机号码</label>
        <div class="col-sm-8">
          <input type="text" class="form-control" ng-value="cred.mobile" disabled>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-offset-3 col-sm-9">
          <label class="checkbox-inline">
            <input type="checkbox" ng-model="cred.isSendSms" ng-true-value="1" ng-false-value="0" name="isSendSms" ng-disabled="!cred.mobile"> 发送手机短信通知
          </label>
          <label class="checkbox-inline">
            <input type="checkbox" ng-model="cred.isSendMessage" ng-true-value="1" ng-false-value="0" name="isSendMessage"> 发送通知到用户中心
          </label>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-default" ng-click="userModal.close()">取消</button>
      <button type="button" class="btn btn-success" ng-click="editPassword(cred)" ng-disabled="chgUserPswForm.$invalid || chgUserPswForm.$pristine || cred.newpassword !== cred.confirmpassword">提交</button>
    </div>
  </form>
</div>