<div class="modal-wrapper editqrcode">
  <div class="modal-header clearfix">
    <h4 class="modal-title pull-left"><span ng-if="qrcodeInfo.id === 'new'">创建</span><span ng-if="qrcodeInfo.id !== 'new'">查看</span>二维码<span ng-if="qrcodeInfo.id !== 'new'">详情</span></h4>
    <div class="button-group pull-right">
      <button class="btn btn-default" ng-if="qrcodeInfo.id !== 'new'" ng-click="cancel()">关闭</button>
      <button class="btn btn-default" ng-if="qrcodeInfo.id === 'new'" ng-click="cancel()">取消</button>
      <button class="btn btn-success" ng-click="save(qData)" ng-if="qrcodeInfo.id === 'new'" ng-disabled="qrcodeForm.$invalid || qrcodeForm.$pristine || saving">
        <span ng-if="!saving">保存</span>
        <span ng-if="saving"><i class="fa fa-spin fa-circle-o-notch"></i></span>
      </button>
    </div>
  </div>

  <div class="modal-body">
    <form class="form-horizontal" name="qrcodeForm" novalidate>
      <div class="form-group" ng-if="qrcodeInfo.id === 'new'">
        <label class="col-xs-3 control-label"><em>*</em>二维码期限</label>
        <div class="col-xs-8 input-wrapper">
          <label class="radio-inline">
            <input type="radio"  name="dueRadioOptions" id="due1" ng-value="0" ng-model="qData.qrtype"> 生成后长期有效　<small class="helper-text">（余量： {{qrcodeInfo.length}}/100000）</small>
          </label>
        </div>
        <div class="col-xs-offset-3 col-xs-8 input-wrapper">
          <label class="radio-inline">
            <input type="radio" name="dueRadioOptions" id="due2" ng-value="1" ng-model="qData.qrtype"> 生成后7天内有效
          </label>
        </div>
      </div>

      <div class="form-group has-feedback" ng-if="qData.qrtype === 0 && qrcodeInfo.id === 'new'" ng-model-options="{ debounce: 500 }" ng-class="{'has-error': qrcodeForm.qrid.$invalid && !qrcodeForm.qrid.$pristine }">
        <label class="col-xs-3 control-label"><em>*</em>分组ID</label>
        <div class="col-xs-8 input-wrapper">
          <input type="number" class="form-control" 
          placeholder="" 
          name="qrid" 
          ng-model="qData.qrid"
          required
          min="0"
          max="100000"
          tooltip="请填写0-100000的数字，不能与已有的重复"
          tooltip-trigger="focus"
          >
          <i class="fa fa-exclamation-triangle form-control-feedback"></i>
        </div>
      </div>

      <div class="form-group has-feedback" ng-model-options="{ debounce: 500 }" ng-class="{'has-error': qrcodeForm.qrtitle.$invalid && !qrcodeForm.qrtitle.$pristine }">
        <label class="col-xs-3 control-label"><em>*</em>场景名称</label>
        <div class="col-xs-8 input-wrapper">
          <input type="text" class="form-control fix-input" 
          placeholder="" 
          name="qrtitle"
          ng-model="qData.qrtitle"
          required
          ng-minlength="1" minlength="1" 
          ng-maxlength="40" maxlength="40" 
          tooltip="1-40字" 
          tooltip-trigger="focus"
          ng-readonly="qrcodeInfo.id !== 'new'">
          <i class="fa fa-exclamation-triangle form-control-feedback"></i>
        </div>
      </div>

      <div class="form-group has-feedback" ng-model-options="{ debounce: 500 }" ng-class="{'has-error': qrcodeForm.qrdescribe.$invalid && !qrcodeForm.qrdescribe.$pristine }">
        <label class="col-xs-3 control-label"><em>*</em>描述</label>
        <div class="col-xs-8 input-wrapper">
          <input type="text" class="form-control fix-input" 
          placeholder="" 
          name="qrdescribe"
          ng-model="qData.qrdescribe"
          required
          ng-minlength="1" minlength="1" 
          ng-maxlength="40" maxlength="40" 
          tooltip="1-40字" 
          tooltip-trigger="focus"
          ng-readonly="qrcodeInfo.id !== 'new'">
          <i class="fa fa-exclamation-triangle form-control-feedback"></i>
        </div>
      </div>

      <div class="form-group has-feedback" ng-model-options="{ debounce: 500 }" ng-class="{'has-error': qrcodeForm.qrremark.$invalid && !qrcodeForm.qrremark.$pristine }">
        <label class="col-xs-3 control-label"><em>*</em>备注</label>
        <div class="col-xs-8 input-wrapper">
          <textarea class="form-control fix-input" placeholder="" 
          rows="4" 
          name="qrremark" 
          ng-model="qData.qrremark"
          required
          ng-minlength="1" minlength="1" 
          ng-maxlength="100" maxlength="100" 
          tooltip="1-100字" 
          tooltip-trigger="focus"
          ng-readonly="qrcodeInfo.id !== 'new'"></textarea> 
          <i class="fa fa-exclamation-triangle form-control-feedback"></i>
        </div>
      </div>
    </div>
  </form>
</div>